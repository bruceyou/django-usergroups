{% extends "base.html" %}


{% block title %}Organization: {{ group.name }}{% endblock %}

{% block content %}
<h1>{{ group.name }}</h1>

{% if is_admin %}
<p><a href="{% url usergroups_delete_group group.id %}">Delete Group</a></p>
<h2>Applications</h2>
{% if group.usergroupapplication_set.count %}
<ul>
    {% for application in group.usergroupapplication_set.all %}
    <li>{{ application.user.get_full_name }} <a href="{% url usergroups_approve_application group.id application.id %}">Approve</a></li>
    {% endfor %}
</ul>
{% endif %}
{% endif %}

<h2>Admins</h2>
{% if group.admins.count %}
<ul>
    {% for admin in group.admins.all %}
    <li>{{ admin.get_full_name }}{% if is_admin %} <a href="{% url usergroups_revoke_admin group.id admin.id %}">Revoke admin privileges</a>{% endif %}</li>
    {% endfor %}
</ul>
{% endif %}

{% if is_member %}
<p><a href="{% url usergroups_leave_group group.id %}">Leave Group</a></p>
{% endif %}

{% if user.is_authenticated and not is_member %}
<p><a href="{% url usergroups_apply_to_join group.id %}">Apply to join this group</a></p>
{% endif %}

<h2>Members</h2>
{% if member_list.count %}
<ul>
    {% for member in member_list %}
    <li>{{ member.get_full_name }}{% if is_admin %} {% ifequal user member %}<em>This is you</em>{% else %}<a href="{% url usergroups_remove_member group.pk, member.pk %}">Remove from group</a> <a href="{% url usergroups_add_admin group.id member.id %}">Make admin</a>{% endifequal %}{% endif %}</li>
    {% endfor %}
</ul>
{% endif %}

{% endblock %}